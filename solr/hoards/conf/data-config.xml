<dataConfig>
    <dataSource type="JdbcDataSource"
                driver="com.mysql.jdbc.Driver"
                batchSize="-1"
                url="jdbc:mysql://localhost/{db}"
                user=""
                password=""
                tinyInt1isBit="false"/>
    <document name="content">
        <entity name="node" transformer="HTMLStripTransformer"
                query="
SELECT
DISTINCT(hoards.id) as id,
CONCAT('hoards-',hoards.id) AS hoardIdentifier,
hoards.hoardID,
hoards.secuid,
findspots.county,
findspots.district,
findspots.parish,
findspots.knownas,
osRegions.label as regionName,
findspots.gridref,
findspots.fourFigure,
findspots.geohash,
findspots.declat AS latitude,
findspots.declong AS longitude,
findspots.easting,
findspots.northing,
findspots.elevation,
findspots.fourFigureLat,
findspots.fourFigureLon,
findspots.gridlen AS 'precision',
findspots.accuracy,
maporigins.term AS gridSource,
CONCAT(declat,',',declong) AS coordinates,
hoards.institution,
'HOARD' AS objecttype,
hoards.notes,
hoards.description,
hoards.other_ref AS otherRef,
hoards.culture,
cultures.term AS cultureName,
cultures.bmCultureID,
hoards.inscription,
hoards.classification,
hoards.subclass As subClassification,
hoards.treasureID AS TID,
hoards.treasure,
hoards.secwfstage AS workflow,
hoards.material1 AS material,
mat.term AS materialTerm,
mat.bmID AS primaryMaterialBM,
hoards.material2 AS secondaryMaterial,
mat2.term AS secondaryMaterialTerm,
mat2.bmID AS secondaryMaterialBM,
hoards.curr_loc AS currentLocation,
hoards.musaccno, hoards.rally,
findspots.old_findspotid AS findspotcode,
hoards.rallyID,
rallies.rally_name AS rallyName,
hoards.decstyle,
decstyles.term AS decstyleTerm,
hoards.manmethod AS manufacture,
manufactures.term AS manufactureTerm,
manufactures.bmID AS bmManufacture,
surftreatments.term AS treatment,
surftreatments.bmID AS bmTreatment,
hoards.surftreat AS treatment,
hoards.preservation,
preservations.term AS preservationTerm,
preservations.bmID AS bmPreservation,
hoards.discmethod as discovery,
discmethods.method AS discoveryMethod,
EXTRACT(YEAR FROM datefound1) AS discovered,
hoards.subs_action as subsequentAction,
subsequentActions.action as subsequentActionTerm,
hoards.completeness,
completeness.term AS completenessTerm,
hoards.findofnote AS note,
findofnotereasons.term as reasonTerm,
hoards.findofnotereason AS reason,
hoards.weight,
hoards.quantity,
hoards.broadperiod,
hoards.objdate1period AS periodFrom,
p1.term AS periodFromName,
hoards.objdate2period AS periodTo,
p2.term AS periodToName,
hoards.numdate1 AS fromdate,
hoards.numdate2 AS todate,
hoards.objdate1subperiod AS fromsubperiod,
hoards.objdate2subperiod AS tosubperiod,
hoards.datefound1,
hoards.datefound2,
dq1.term as fromDateQualifier,
dq2.term as toDateQualifier,
sub1.term AS subperiodFrom,
sub2.term AS subperiodTo,
hoards.createdBy AS createdBy,
users.fullname AS creator,
hoards.created,
hoards.updated,
hoards.updatedBy,
users2.fullname AS updater,
hoards.dbpediaSlug,
slides.imageID AS thumbnail,
slides.filename,
users.imagedir,
licenseType.url AS imageCopyright,
hoards.finderID,
hoards.recorderID,
hoards.identifier1ID AS identifierID,
hoards.identifier2ID,
finders.fullname AS finder,
primaries.fullname AS identifier,
secondaries.fullname AS secondaryIdentifier,
recorders.fullname AS recorder,
p1.ehTerm AS periodFromEH,
p2.term AS periodToEH,
p3.ehTerm as broadperiodEH,
p1.bmID AS periodFromBM,
p2.bmID AS periodToBM,
p3.bmID as broadperiodBM,
findspots.countyID,
findspots.districtID,
findspots.parishID,
findspots.woeid,
findspots.regionID,
osCounties.type as countyType,
osParishes.type as parishType,
osDistricts.type as districtType,
findspots.geonamesID
FROM hoards
LEFT JOIN findspots ON hoards.secuid = findspots.findID
LEFT JOIN findofnotereasons ON hoards.findofnotereason = findofnotereasons.id
LEFT JOIN users ON users.id = hoards.createdBy
LEFT JOIN users AS users2 ON users2.id = hoards.updatedBy
LEFT JOIN users AS users3 ON user3.id = slides.createdBy
LEFT JOIN materials AS mat ON hoards.material1 = mat.id
LEFT JOIN materials AS mat2 ON hoards.material2 = mat2.id
LEFT JOIN decmethods ON hoards.decmethod = decmethods.id
LEFT JOIN decstyles ON hoards.decstyle = decstyles.id
LEFT JOIN manufactures ON hoards.manmethod = manufactures.id
LEFT JOIN surftreatments ON hoards.surftreat = surftreatments.id
LEFT JOIN completeness ON hoards.completeness = completeness.id
LEFT JOIN preservations ON hoards.preservation = preservations.id
LEFT JOIN periods AS p1 ON hoards.objdate1period = p1.id
LEFT JOIN periods AS p2 ON hoards.objdate2period = p2.id
LEFT JOIN periods AS p3 ON hoards.broadperiod = p3.term
LEFT JOIN subperiods AS sub1 ON hoards.objdate1subperiod = sub1.id
LEFT JOIN subperiods AS sub2 ON hoards.objdate2subperiod = sub2.id
LEFT JOIN cultures ON hoards.culture = cultures.id
LEFT JOIN discmethods ON discmethods.id = hoards.discmethod
LEFT JOIN finds_images ON finds_images.find_id = hoards.secuid
LEFT JOIN slides ON finds_images.image_id = slides.secuid
LEFT JOIN workflowstages ON hoards.secwfstage = workflowstages.id
LEFT JOIN rallies ON hoards.rallyID = rallies.id
LEFT JOIN subsequentActions ON hoards.subs_action = subsequentActions.id
LEFT JOIN people AS finders ON hoards.finderID = finders.secuid
LEFT JOIN people AS primaries ON hoards.identifier1ID = primaries.secuid
LEFT JOIN people AS secondaries ON hoards.identifier2ID = secondaries.secuid
LEFT JOIN people AS recorders ON hoards.recorderID = recorders.secuid
LEFT JOIN maporigins ON maporigins.id = findspots.gridrefsrc
LEFT JOIN osParishes ON findspots.parishID = osParishes.osID
LEFT JOIN osDistricts ON findspots.districtID = osDistricts.osID
LEFT JOIN osCounties ON findspots.countyID = osCounties.osID
LEFT JOIN osRegions ON findspots.regionID = osCounties.osID
LEFT JOIN datequalifiers AS dq1 ON dq1.id = hoards.objdate1cert
LEFT JOIN datequalifiers AS dq2 ON dq2.id = hoards.objdate1cert
LEFT JOIN statuses ON coins.status = statuses.id
LEFT JOIN licenseType ON slides.ccLicense = licenseType.id
">
            <!--  Identifiers -->
            <field column="findIdentifier" name="findIdentifier"/>
            <field column="id" name="id"/>
            <field column="old_findID" name="old_findID"/>
            <field column="secuid" name="secuid"/>

            <!--  Spatial metadata -->
            <field column="county" name="county"/>
            <field column="district" name="district"/>
            <field column="parish" name="parish"/>
            <field column="knownas" name="knownas"/>
            <field column="regionName" name="regionName"/>
            <field column="Findspotcode" name="Findspotcode"/>

            <!--  Spatial coordinates  -->
            <field column="fourFigure" name="fourFigure"/>
            <field column="gridref" name="gridref"/>
            <field column="geohash" name="geohash"/>
            <field column="latitude" name="latitude"/>
            <field column="longitude" name="longitude"/>
            <field column="elevation" name="elevation"/>
            <field column="easting" name="easting"/>
            <field column="northing" name="northing"/>
            <field column="gridSource" name="gridSource"/>
            <field column="fourFigureLat" name="fourFigureLat"/>
            <field column="fourFigureLon" name="fourFigureLon"/>
            <field column="precision" name="precision"/>
            <field column="accuracy" name="accuracy"/>
            <field column="coordinates" name="coordinates"/>

            <!--  Object metadata -->
            <field column="institution" name="institution"/>
            <field column="notes" name="notes" stripHTML="true"/>
            <field column="objecttype" name="objecttype"/>
            <field column="smrRef" name="smrRef"/>
            <field column="otherRef" name="otherRef"/>
            <field column="culture" name="culture"/>
            <field column="inscription" name="inscription"/>
            <field column="classification" name="classification"/>
            <field column="subClassification" name="subClassification"/>
            <field column="TID" name="TID"/>
            <field column="description" name="description" stripHTML="true"/>
            <field column="workflow" name="workflow"/>
            <field column="material" name="material"/>
            <field column="materialTerm" name="materialTerm"/>
            <field column="primaryMaterialBM" name="primaryMaterialBM"/>
            <field column="secondaryMaterial" name="secondaryMaterial"/>
            <field column="secondaryMaterialTerm" name="secondaryMaterialTerm"/>
            <field column="secondaryMaterialBM" name="secondaryMaterialBM"/>
            <field column="currentLocation" name="currentLocation"/>
            <field column="musaccno" name="musaccno"/>
            <field column="rally" name="rally"/>
            <field column="rallyID" name="rallyID"/>
            <field column="rallyName" name="rallyName"/>
            <field column="decstyle" name="decstyle"/>
            <field column="decstyleTerm" name="decstyleTerm"/>
            <field column="manufacture" name="manufacture"/>
            <field column="manufactureTerm" name="manufactureTerm"/>
            <field column="bmManufacture" name="bmManufacture"/>
            <field column="treatment" name="surface"/>
            <field column="treatment" name="treatment"/>
            <field column="treatmentTerm" name="treatmentTerm"/>
            <field column="bmTreatment" name="bmTreatment"/>
            <field column="preservation" name="preservation"/>
            <field column="preservationTerm" name="preservationTerm"/>
            <field column="bmPreservation" name="bmPreservation"/>
            <field column="discovery" name="discovery"/>
            <field column="discoveryMethod" name="discoveryMethod"/>
            <field column="discovered" name="discovered"/>
            <field column="subsequentAction" name="subsequentAction"/>
            <field column="subsequentActionTerm" name="subsequentActionTerm"/>
            <field column="completeness" name="completeness"/>
            <field column="completenessTerm" name="completenessTerm"/>
            <field column="note" name="note"/>
            <field column="reason" name="reason"/>
            <field column="reasonTerm" name="reasonTerm"/>
            <field column="width" name="width"/>
            <field column="height" name="height"/>
            <field column="diameter" name="diameter"/>
            <field column="thickness" name="thickness"/>
            <field column="length" name="length"/>
            <field column="weight" name="weight"/>
            <field column="quantity" name="quantity"/>
            <field column="cultureName" name="cultureName"/>
            <field column="treasure" name="treasure"/>
            <field column="hoardID" name="hoardID"/>
            <field column="hoardName" name="hoardName"/>
            <field column="hoard" name="hoard"/>


            <!-- Chronology metadata -->
            <field column="broadperiod" name="broadperiod"/>
            <field column="periodFrom" name="periodFrom"/>
            <field column="periodFromName" name="periodFromName"/>
            <field column="periodTo" name="periodTo"/>
            <field column="periodToName" name="periodToName"/>
            <field column="fromdate" name="fromdate"/>
            <field column="todate" name="todate"/>
            <field column="fromsubperiod" name="fromsubperiod"/>
            <field column="tosubperiod" name="tosubperiod"/>
            <field column="datefound1" name="datefound1"/>
            <field column="datefound2" name="datefound2"/>
            <field column="fromDateQualifier" name="fromDateQualifier"/>
            <field column="toDateQualifier" name="toDateQualifier"/>
            <field column="subperiodTo" name="subperiodTo"/>
            <field column="subperiodFrom" name="subperiodFrom"/>

            <!--  Admin metadata -->
            <field column="createdBy" name="createdBy"/>
            <field column="created" name="created"/>
            <field column="creator" name="creator"/>
            <field column="updated" name="updated"/>
            <field column="updatedBy" name="updatedBy"/>
            <field column="updater" name="updater"/>
            <field column="dbpediaSlug" name="dbpediaSlug"/>

            <!--  Numismatic metadata -->
            <field column="ruler" name="ruler"/>
            <field column="ruler2" name="ruler2"/>
            <field column="rulerName" name="rulerName"/>
            <field column="secondaryRulerName" name="secondaryRulerName"/>
            <field column="denomination" name="denomination"/>
            <field column="denominationName" name="denominationName"/>
            <field column="mint" name="mint"/>
            <field column="mintName" name="mintName"/>
            <field column="obverseDescription" name="obverseDescription" stripHTML="true"/>
            <field column="reverseDescription" name="reverseDescription" stripHTML="true"/>
            <field column="obverseLegend" name="obverseLegend"/>
            <field column="reverseLegend" name="reverseLegend"/>
            <field column="mintmark" name="mintmark"/>
            <field column="cciNumber" name="cciNumber"/>
            <field column="mackType" name="mackType"/>
            <field column="bmcType" name="bmcType"/>
            <field column="allentype" name="allenType"/>
            <field column="abcType" name="abcType"/>
            <field column="vaType" name="vaType"/>
            <field column="reeceID" name="reeceID"/>
            <field column="geography" name="geography"/>
            <field column="geographyID" name="geographyID"/>
            <field column="moneyer" name="moneyer"/>
            <field column="moneyerName" name="moneyerName"/>
            <field column="tribe" name="tribe"/>
            <field column="tribeName" name="tribeName"/>
            <field column="category" name="category"/>
            <field column="categoryTerm" name="categoryTerm"/>
            <field column="type" name="type"/>
            <field column="typeTerm" name="typeterm"/>
            <field column="axis" name="axis"/>
            <field column="reverse" name="reverse"/>
            <field column="reverseType" name="reverseType"/>
            <field column="status" name="status"/>
            <field column="statusTerm" name="statusTerm"/>

            <!--  Image data -->
            <field column="thumbnail" name="thumbnail"/>
            <field column="filename" name="filename"/>
            <field column="imagedir" name="imagedir"/>

            <!--  Personal metadata -->
            <field column="finder" name="finder"/>
            <field column="finderID" name="finderID"/>
            <field column="recorder" name="recorder"/>
            <field column="recorderID" name="recorderID"/>
            <field column="identifier" name="identifier"/>
            <field column="identifierID" name="identifierID"/>
            <field column="secondaryIdentifier" name="secondaryIdentifier"/>
            <field column="identifer2ID" name="identifier2ID"/>

            <!--  Numismatic linked data fields -->
            <field column="rulerNomisma" name="rulerNomisma"/>
            <field column="rulerDbpedia" name="rulerDbpedia"/>
            <field column="rulerViaf" name="rulerViaf"/>
            <field column="rulerBM" name="rulerBM"/>
            <field column="moneyerDbpedia" name="moneyerDbpedia"/>
            <field column="moneyerViaf" name="moneyerViaf"/>
            <field column="moneyerBM" name="moneyerBM"/>
            <field column="bmCultureID" name="bmCultureID"/>
            <field column="bmTribeID" name="bmTribeID"/>

            <!--  Mint linked data fields -->
            <field column="nomismaMintID" name="nomismaMintID"/>
            <field column="mintWoeid" name="mintWoeid"/>
            <field column="mintGeonamesID" name="mintGeonamesID"/>
            <field column="mintBM" name="mintBM"/>
            <field column="pleiadesID" name="pleiadesID"/>

            <!--  Denomination linked data -->
            <field column="nomismaDenominationID" name="nomismaDenomination"/>
            <field column="denominationBM" name="denominationBM"/>
            <field column="denominationDbpedia" name="denominationDbpedia"/>

            <!--  Linked data identifiers for Geodata -->
            <field column="regionID" name="regionID"/>
            <field column="countyID" name="countyID"/>
            <field column="districtID" name="districtID"/>
            <field column="parishID" name="parishID"/>
            <field column="woeid" name="woeid"/>
            <field column="countyType" name="countyType"/>
            <field column="districtType" name="districtType"/>
            <field column="parishType" name="parishType"/>
            <field column="geonamesID" name="geonamesID"/>

            <!-- Period linked data identifiers -->
            <field column="periodFromEH" name="periodFromEH"/>
            <field column="periodFromBM" name="periodFromBM"/>
            <field column="periodToEH" name="periodToEH"/>
            <field column="periodFromBM" name="periodFromBM"/>
            <field column="broadperiodEH" name="broadperiodEH"/>
            <field column="broadperiodBM" name="broadperiodBM"/>

        </entity>

    </document>
</dataConfig>
